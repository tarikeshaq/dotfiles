# ====================================
# tmux Configuration
# ====================================

# ========== General Settings ==========

# Enable focus events for applications running inside tmux
# This allows Neovim to receive FocusGained/FocusLost events when switching panes
set-option -g focus-events on

# Enable true color support
set -g default-terminal "screen-256color"
set -ga terminal-overrides ",xterm-256color:Tc"

# Increase scrollback buffer size
set -g history-limit 10000

# Start window and pane numbering at 1 instead of 0
set -g base-index 1
setw -g pane-base-index 1

# Renumber windows when one is closed
set -g renumber-windows on

# Enable mouse support (clicking, scrolling, resizing panes)
set -g mouse on

# Reduce escape time for faster command sequences (important for Vim/Neovim)
set -sg escape-time 0

# ========== Key Bindings ==========

# Change prefix from Ctrl-b to Ctrl-a (easier to reach)
unbind C-b
set -g prefix C-a
bind C-a send-prefix

# Reload configuration file with prefix + r
bind r source-file ~/.tmux.conf \; display "Config reloaded!"

# Split panes using | and - (more intuitive than " and %)
bind | split-window -h -c "#{pane_current_path}"
bind - split-window -v -c "#{pane_current_path}"
unbind '"'
unbind %

# Create new window in current path
bind c new-window -c "#{pane_current_path}"

# Vim-style pane navigation
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# Vim-style pane resizing
bind -r H resize-pane -L 5
bind -r J resize-pane -D 5
bind -r K resize-pane -U 5
bind -r L resize-pane -R 5

# ========== Copy Mode ==========

# Use vi mode for copy mode
setw -g mode-keys vi

# Vim-style copy mode bindings
bind -T copy-mode-vi v send-keys -X begin-selection
bind -T copy-mode-vi y send-keys -X copy-selection-and-cancel

# ========== Status Bar (Catppuccin Macchiato Theme) ==========

# Update status bar every second
set -g status-interval 1

# Center the window list
set -g status-justify centre

# Catppuccin Macchiato color palette
# Base colors: #24273a (base), #363a4f (surface0), #494d64 (surface1)
# Text colors: #cad3f5 (text), #8aadf4 (blue), #ed8796 (red), #a6da95 (green)
# Accent: #8aadf4 (blue), #c6a0f6 (mauve)

# Status bar colors (matches Neovim background)
set -g status-style bg=#24273a,fg=#cad3f5

# Window status format
setw -g window-status-format " #I:#W "
setw -g window-status-current-format " #I:#W "
setw -g window-status-current-style bg=#8aadf4,fg=#24273a,bold
setw -g window-status-style fg=#a5adcb

# Left side: session name (with mauve accent)
set -g status-left "#[bg=#c6a0f6,fg=#24273a,bold] #S #[bg=#24273a] "
set -g status-left-length 20

# Right side: date and time (with blue accent)
set -g status-right " #[bg=#8aadf4,fg=#24273a,bold] %Y-%m-%d %H:%M:%S "
set -g status-right-length 40

# ========== Pane Borders (Catppuccin Macchiato) ==========

# Pane border colors (surface1 for inactive, blue for active)
set -g pane-border-style fg=#494d64
set -g pane-active-border-style fg=#8aadf4

# Display pane numbers for longer
set -g display-panes-time 2000
